(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Amount"],{1782:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"order-form__aside"},[n("p",{staticClass:"aside__order"},[t._v(t._s(t.$translate("orderForm.aside.order")))]),t._l(t.orderItems,(function(e,r){return[e?n("div",{key:r,staticClass:"aside__item"},[n("span",[t._v(t._s(t.$translate("orderForm.aside."+r)))]),n("span"),"rent"===r?n("span",[t.getDaysCount(e.from,e.to)?[t._v(" "+t._s(t.getDaysCount(e.from,e.to))+" д ")]:t._e(),t.getHoursCount(e.from,e.to)?[t._v(" "+t._s(t.getHoursCount(e.from,e.to))+" ч ")]:t._e()],2):n("span",[t._v(t._s(e))])]):t._e()]})),t.price&&!t.loading?n("div",{staticClass:"aside__amount"},[n("span",[t._v(t._s(t.$translate("orderForm.aside.price")))]),n("span",[t._v(t._s(t.price)+" ₽")])]):t.loading?n("i",{staticClass:"el-icon-loading",staticStyle:{margin:"10px auto"}}):t._e(),n("el-button",{class:[t.isFinishOrder?"aside__amount-finish-btn":""],attrs:{type:"success",disabled:t.isDisabled},on:{click:t.getNextStep}},[t._v(" "+t._s(t.$translate("orderForm.aside."+t.getLocaleKey(t.$route.name)))+" ")])],2)},a=[],o=n("a6f4"),i={name:"OrderAside",props:{orderItems:{type:Object,default:function(){return{}}},isDisabled:{type:Boolean,default:!0},price:{type:String|Number,default:null},loading:{type:Boolean,default:!1}},setup:function(t,e){var n=e.emit,r=e.root,a=Object(o["a"])((function(){return r.$route.path.includes("confirm-order")})),i={location:"chooseModel",model:"extra",extra:"amountOptions",amount:"buy",confirm:"cancel"},s=function(t){return i[t.toLowerCase()]};function c(){a.value?n("cancel"):n("next")}return{getNextStep:c,isFinishOrder:a,getLocaleKey:s}},methods:{getDaysCount:function(t,e){var n=new Date(e)-new Date(t);return n?Math.floor(+n/1e3/60/60/24):0},getHoursCount:function(t,e){return new Date(e).getHours()-new Date(t).getHours()}}},s=i,c=(n("cde1"),n("2877")),u=Object(c["a"])(s,r,a,!1,null,"71fbfa41",null);e["a"]=u.exports},3429:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"amount"},[n("amount-list-options",{attrs:{"order-options":t.orderOptions,loading:t.isLoading}}),n("order-aside",{attrs:{"order-items":t.orderItems,"is-disabled":!1,loading:t.isLoading,price:t.finalPrice},on:{next:t.confirmOrder}}),n("AmountPopup",{attrs:{"is-active":t.popupIsActive},on:{"update:isActive":function(e){t.popupIsActive=e},"update:is-active":function(e){t.popupIsActive=e},accept:t.finishOrder}})],1)},a=[],o=n("1782"),i=n("6c71"),s=n("a6f4"),c=n("a18c"),u=n("365c"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["amountPopup",t.isActive?"amountPopup-is-active":""]},[n("div",{staticClass:"amountPopup__wrapper"},[n("p",[t._v("Подтвердить заказ")]),n("el-button",{staticClass:"accept-btn",on:{click:t.acceptClick}},[t._v("Подтвердить")]),n("el-button",{staticClass:"finish-btn",on:{click:t.cancelClick}},[t._v("Вернуться")])],1)])},p=[],d={name:"AmountPopup",props:{isActive:{type:Boolean,default:!1}},methods:{cancelClick:function(){this.$emit("update:isActive",!1)},acceptClick:function(){this.$emit("accept",!0)}}},f=d,m=(n("c02c"),n("2877")),v=Object(m["a"])(f,l,p,!1,null,"6cb4efd3",null),b=v.exports;function _(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function O(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){_(o,r,a,i,s,"next",t)}function s(t){_(o,r,a,i,s,"throw",t)}i(void 0)}))}}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j={name:"Amount",components:{OrderAside:o["a"],AmountListOptions:i["a"],AmountPopup:b},setup:function(t,e){var n=e.root,r=Object(s["e"])({city:"",model:"",color:"",rent:{},tariff:"",tank:""}),a=Object(s["f"])({model:"",number:"",tank:"",available:"",image:{}}),o=Object(c["b"])(),i=o.router,l=n.$route.query.id,p=Object(s["f"])(!1),d=Object(s["f"])({}),f=Object(s["f"])(!0),m=Object(s["f"])(0);function v(){Object(u["i"])(l,h(h({},d.value),{},{orderStatusId:{name:"confirmed",id:"5e26a1f0099b810b946c5d8b"}})),i.push({name:"Confirm",query:{id:l}})}function b(){return _.apply(this,arguments)}function _(){return _=O(regeneratorRuntime.mark((function t(){var e,n,o,i,s,c,p,f,v,b,_,O,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["f"])(l);case 2:e=t.sent,n=e.data,o=n.data,i=o.cityId,s=o.pointId,c=o.carId,p=o.color,f=o.dateFrom,v=o.dateTo,b=o.isFullTank,_=o.isNeedChildChair,O=o.isRightWheel,g=o.price,d.value=n.data,r.city="".concat(i.name,", ").concat(s.address),r.model=c.name,r.color=p,r.rent=v-f,r.tank=b?"Да":"",r.child=_?"Да":"",r.rightDrive=O?"Да":"",r.rent={to:v,from:f},m.value=g,a.value.number=c.number,a.value.tank=b?"100%":"",a.value.model=c.name,a.value.image=h(h({},c.thumbnail),{},{name:c.name}),a.value.available="".concat(new Date(f).toLocaleDateString()," ").concat(new Date(f).getHours(),":").concat(new Date(f).getMinutes());case 20:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}return Object(s["d"])((function(){return b().then((function(){return f.value=!1}))})),{orderItems:r,orderOptions:a,finishOrder:v,popupIsActive:p,isLoading:f,finalPrice:m}},methods:{confirmOrder:function(){this.popupIsActive=!0}}},w=j,C=(n("f0ee"),Object(m["a"])(w,r,a,!1,null,"1026006a",null));e["default"]=C.exports},"398c":function(t,e,n){},"68c0":function(t,e,n){},"6c71":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"amount-options__wrapper"},[t.title?n("p",{staticClass:"amount-options__title"},[t._v("Ваш заказ подтверждён")]):t._e(),t.loading?n("i",{staticClass:"el-icon-loading",staticStyle:{transform:"translateX(-50%)",position:"absolute",left:"50%"}}):[n("div",{staticClass:"amount-options__info"},[n("p",[t._v(t._s(t.items.model))]),n("p",[t._v(t._s(t.items.number))]),n("p",[t._v(" "+t._s(t.$translate("orderForm.content.amount.fuel"))+" "),n("span",[t._v(t._s(t.items.tank))])]),n("p",[t._v(" "+t._s(t.$translate("orderForm.content.amount.available"))+" "),n("span",[t._v(t._s(t.items.available))])])]),n("div",{staticClass:"amount__info"},[n("img",{attrs:{src:t.items.image.path,alt:t.items.image.name},on:{error:function(t){return t.target.src="images/car-stub.png"}}})])]],2)},a=[],o=n("a6f4"),i={name:"AmountListOptions",props:{orderOptions:{type:Object,default:function(){return{}}},title:{type:Boolean,required:!1},loading:{type:Boolean,default:!1}},setup:function(t){var e=Object(o["a"])((function(){return t.orderOptions}));return{items:e}}},s=i,c=(n("9a9d"),n("2877")),u=Object(c["a"])(s,r,a,!1,null,"b15a300e",null);e["a"]=u.exports},9795:function(t,e,n){},"9a9d":function(t,e,n){"use strict";n("398c")},b1f5:function(t,e,n){},c02c:function(t,e,n){"use strict";n("68c0")},cde1:function(t,e,n){"use strict";n("b1f5")},f0ee:function(t,e,n){"use strict";n("9795")}}]);
//# sourceMappingURL=Amount.a7cb10af.js.map