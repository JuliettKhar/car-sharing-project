(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Model"],{1782:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside",{staticClass:"order-form__aside"},[r("p",{staticClass:"aside__order"},[e._v(e._s(e.$translate("orderForm.aside.order")))]),e._l(e.orderItems,(function(t,n){return[t?r("div",{key:n,staticClass:"aside__item"},[r("span",[e._v(e._s(e.$translate("orderForm.aside."+n)))]),r("span"),"rent"===n?r("span",[e.getDaysCount(t.from,t.to)?[e._v(" "+e._s(e.getDaysCount(t.from,t.to))+" д ")]:e._e(),e.getHoursCount(t.from,t.to)?[e._v(" "+e._s(e.getHoursCount(t.from,t.to))+" ч ")]:e._e()],2):r("span",[e._v(e._s(t))])]):e._e()]})),e.price&&!e.loading?r("div",{staticClass:"aside__amount"},[r("span",[e._v(e._s(e.$translate("orderForm.aside.price")))]),r("span",[e._v(e._s(e.price)+" ₽")])]):e.loading?r("i",{staticClass:"el-icon-loading",staticStyle:{margin:"10px auto"}}):e._e(),r("el-button",{class:[e.isFinishOrder?"aside__amount-finish-btn":""],attrs:{type:"success",disabled:e.isDisabled},on:{click:e.getNextStep}},[e._v(" "+e._s(e.$translate("orderForm.aside."+e.getLocaleKey(e.$route.name)))+" ")])],2)},a=[],i=r("a6f4"),o={name:"OrderAside",props:{orderItems:{type:Object,default:function(){return{}}},isDisabled:{type:Boolean,default:!0},price:{type:String|Number,default:null},loading:{type:Boolean,default:!1}},setup:function(e,t){var r=t.emit,n=t.root,a=Object(i["a"])((function(){return n.$route.path.includes("confirm-order")})),o={location:"chooseModel",model:"extra",extra:"amountOptions",amount:"buy",confirm:"cancel"},c=function(e){return o[e.toLowerCase()]};function u(){a.value?r("cancel"):r("next")}return{getNextStep:u,isFinishOrder:a,getLocaleKey:c}},methods:{getDaysCount:function(e,t){var r=new Date(t)-new Date(e);return r?Math.floor(+r/1e3/60/60/24):0},getHoursCount:function(e,t){return new Date(t).getHours()-new Date(e).getHours()}}},c=o,u=(r("cde1"),r("2877")),s=Object(u["a"])(c,n,a,!1,null,"71fbfa41",null);t["a"]=s.exports},2891:function(e,t,r){},"68b3":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"model"},[r("div",{staticClass:"model__wrapper"},[r("div",{staticClass:"model__filters"},[r("radio-group",{attrs:{"model-data":e.modelState.carFilter,"car-filter-data":e.modelState.filterModel},on:{"update:modelData":function(t){return e.$set(e.modelState,"carFilter",t)},"update:model-data":function(t){return e.$set(e.modelState,"carFilter",t)},change:e.changeModel}})],1),r("div",{staticClass:"model__cars"},[e.modelState.isLoading?r("i",{staticClass:"el-icon-loading"}):e._l(e.carImages,(function(t,n){return r("div",{key:n,class:["model__cars-item",e.modelState.isActiveCar===t.id?"selected":""],on:{click:function(r){e.modelState.isActiveCar=t.id}}},[r("p",[e._v(e._s(t.name))]),r("p",[e._v(e._s(t.priceMin)+" - "+e._s(t.priceMax))]),r("img",{attrs:{src:t.thumbnail.path,alt:t.name},on:{error:function(e){return e.target.src="images/car-stub.png"}}})])}))],2)]),r("order-aside",{attrs:{"order-items":e.orderItems,"is-disabled":e.isDisabledButton,price:e.priceRange,loading:e.modelState.isLoading},on:{next:e.updateCurrentOrder}})],1)},a=[],i=r("a6f4"),o=r("9a74"),c=r("1782"),u=r("365c");function s(e){return m(e)||f(e)||l(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function m(e){if(Array.isArray(e))return p(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r,n,a,i,o){try{var c=e[i](o),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){v(i,n,a,o,c,"next",e)}function c(e){v(i,n,a,o,c,"throw",e)}o(void 0)}))}}var g={name:"Model",components:{RadioGroup:o["a"],OrderAside:c["a"]},setup:function(e,t){var r=t.root,n=Object(i["e"])({carFilter:"",currentCarItem:{},filterModel:["Все модели"],isActiveCar:"",isLoading:!0}),a=Object(i["f"])([]),o=Object(i["a"])((function(){return a.value})),c=Object(i["f"])(o.value),d=Object(i["a"])((function(){var e=a.value.filter((function(e){return e.id===n.isActiveCar}))[0];return(null===e||void 0===e?void 0:e.name)||""})),l=Object(i["a"])((function(){return a.value.filter((function(e){return e.id===n.isActiveCar}))[0]||{}})),f=Object(i["f"])({city:"",model:d}),m=Object(i["a"])((function(){var e,t,r,n,a=(null===(e=l.value)||void 0===e?void 0:e.priceMin)&&(null===(t=l.value)||void 0===t?void 0:t.priceMax);return a?"".concat((null===(r=l.value)||void 0===r?void 0:r.priceMin)||0," - ").concat((null===(n=l.value)||void 0===n?void 0:n.priceMax)||0):0})),p=r.$route.query.id,v=Object(i["f"])({});function g(e){c.value="Все модели"===e?a.value:a.value.filter((function(t){return t.categoryId.id===e.id}))}function _(){return b.apply(this,arguments)}function b(){return b=h(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["d"])();case 2:r=e.sent,a=r.data,(t=n.filterModel).push.apply(t,s(a.data));case 5:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function y(){return O.apply(this,arguments)}function O(){return O=h(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["c"])();case 2:return t=e.sent,r=t.data,a.value=r.data,e.next=7,g(n.currentCarItem);case 7:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function C(){return I.apply(this,arguments)}function I(){return I=h(regeneratorRuntime.mark((function e(){var t,r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["f"])(p);case 2:a=e.sent,i=a.data,o=i.data.carId,v.value=i.data,n.carFilter=(null===o||void 0===o?void 0:o.categoryId.id)||"Все модели",n.currentCarItem=(null===o||void 0===o?void 0:o.categoryId)||"Все модели",n.isActiveCar=(null===o||void 0===o?void 0:o.id)||"",f.value.city="".concat((null===(t=i.data)||void 0===t?void 0:t.cityId.name)||"",", ").concat((null===(r=i.data)||void 0===r?void 0:r.pointId.address)||"");case 10:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}return Object(i["c"])((function(){return Promise.all([C(),y(),_()]).then((function(){return n.isLoading=!1}))})),{carImages:c,modelState:n,images:a,changeModel:g,orderItems:f,selectedModel:l,priceRange:m,orderId:p,currentOrder:v}},computed:{isDisabledButton:function(){return Boolean(!this.orderItems.model||!this.orderItems.city)||!1}},methods:{updateCurrentOrder:function(){var e=this.currentOrder,t=e.orderStatusId,r=e.cityId,n=e.pointId,a=e.id,i=e.createdAt,o={orderStatusId:t,cityId:r,pointId:n,id:a,createdAt:i,carId:this.selectedModel.id,color:"",dateFrom:0,dateTo:0,rateId:{},price:this.priceRange,isFullTank:!1,isNeedChildChair:!1,isRightWheel:!1};Object(u["i"])(this.orderId,o),this.$router.push({name:"Extra",query:{id:this.orderId}})}}},_=g,b=(r("eee9"),r("2877")),y=Object(b["a"])(_,n,a,!1,null,"cd2f4aae",null);t["default"]=y.exports},"68e7":function(e,t,r){},"9a74":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-radio-group",{on:{change:e.updateFilters},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[e._l(e.carFilterData,(function(t,n){return[t.name?r("el-radio",{key:n,attrs:{label:t.id},on:{change:function(r){return e.changeValue(t)}}},[e._v(" "+e._s(t.name)+" ")]):r("el-radio",{key:n,attrs:{label:t},on:{change:function(r){return e.changeValue(t)}}},[e._v(" "+e._s(t)+" ")])]}))],2)},a=[],i=r("a6f4"),o={name:"RadioGroup",props:{carFilterData:{type:Array,required:!0},modelData:{type:String|Object,required:!0}},setup:function(e){var t=Object(i["g"])(e),r=t.modelData,n=Object(i["f"])("");return Object(i["h"])(r,(function(e){return n.value=e})),{model:n}},methods:{changeValue:function(e){this.$emit("change",e)},updateFilters:function(e){this.$emit("update:modelData",e)}}},c=o,u=(r("9e7a"),r("2877")),s=Object(u["a"])(c,n,a,!1,null,"aee6fec4",null);t["a"]=s.exports},"9e7a":function(e,t,r){"use strict";r("2891")},b1f5:function(e,t,r){},cde1:function(e,t,r){"use strict";r("b1f5")},eee9:function(e,t,r){"use strict";r("68e7")}}]);
//# sourceMappingURL=Model.f3f52fb7.js.map