{"version":3,"sources":["webpack:///./src/components/order/OrderAside.vue?6b34","webpack:///src/components/order/OrderAside.vue","webpack:///./src/components/order/OrderAside.vue?77b3","webpack:///./src/components/order/OrderAside.vue","webpack:///./src/components/order/ConfirmOrder.vue?bdf3","webpack:///./src/components/order/common/AmountListOptions.vue?30cb","webpack:///src/components/order/common/AmountListOptions.vue","webpack:///./src/components/order/common/AmountListOptions.vue?f9bb","webpack:///./src/components/order/common/AmountListOptions.vue","webpack:///./src/components/order/ConfirmOrder.vue?a12b","webpack:///./src/components/order/composables/useConfirmOrder.js","webpack:///src/components/order/ConfirmOrder.vue","webpack:///./src/components/order/ConfirmOrder.vue?ffa3","webpack:///./src/components/order/ConfirmOrder.vue","webpack:///./src/components/order/composables/useOrder.js","webpack:///./src/components/order/common/AmountListOptions.vue?8420","webpack:///./src/components/order/OrderAside.vue?05c9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$translate","_l","item","key","getDaysCount","from","to","_e","getHoursCount","price","loading","staticStyle","class","isFinishOrder","attrs","isDisabled","on","getNextStep","getLocaleKey","$route","name","staticRenderFns","component","items","model","number","tank","available","image","path","e","target","src","orderOptions","isLoading","orderItems","finalPrice","cancelUserOrder","useConfirmOrder","orderId","useOrder","configItems","getOrderFromPreviousStep","resetOrderItems","reactive","city","color","rent","tariff","ref","useRouter","router","cancelOrder","userData","cancelOrderById","Notification","success","push","error","message","getPreviousOrder","value","cityId","pointId","address","carId","dateTo","dateFrom","isFullTank","child","isNeedChildChair","rightDrive","isRightWheel","Date","toLocaleDateString","getHours","getMinutes","thumbnail","onMounted","then","catch","finally","onBeforeUnmount","orderStatusId","rateId","updateConfigFields","fields","fieldsKey","hasOwnProperty","creationNewOrder","order","createOrder","data","query","id","getOrderById","updatingCurrentOrder","routeName","updateOrder"],"mappings":"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","file":"@/assets/js/Confirm.52484df4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('aside',{staticClass:\"order-form__aside\"},[_c('p',{staticClass:\"aside__order\"},[_vm._v(_vm._s(_vm.$translate(\"orderForm.aside.order\")))]),_vm._l((_vm.orderItems),function(item,key){return [(item)?_c('div',{key:key,staticClass:\"aside__item\"},[_c('span',[_vm._v(_vm._s(_vm.$translate((\"orderForm.aside.\" + key))))]),_c('span'),(key === 'rent')?_c('span',[(_vm.getDaysCount(item.from, item.to))?[_vm._v(\" \"+_vm._s(_vm.getDaysCount(item.from, item.to))+\" д \")]:_vm._e(),(_vm.getHoursCount(item.from, item.to))?[_vm._v(\" \"+_vm._s(_vm.getHoursCount(item.from, item.to))+\" ч \")]:_vm._e()],2):_c('span',[_vm._v(_vm._s(item))])]):_vm._e()]}),(_vm.price && !_vm.loading)?_c('div',{staticClass:\"aside__amount\"},[_c('span',[_vm._v(_vm._s(_vm.$translate(\"orderForm.aside.price\")))]),_c('span',[_vm._v(_vm._s(_vm.price)+\" ₽\")])]):(_vm.loading)?_c('i',{staticClass:\"el-icon-loading\",staticStyle:{\"margin\":\"10px auto\"}}):_vm._e(),_c('el-button',{class:[_vm.isFinishOrder ? 'aside__amount-finish-btn' : ''],attrs:{\"type\":\"success\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.getNextStep}},[_vm._v(\" \"+_vm._s(_vm.$translate((\"orderForm.aside.\" + (_vm.getLocaleKey(_vm.$route.name)))))+\" \")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <aside class=\"order-form__aside\">\n    <p class=\"aside__order\">{{ $translate(\"orderForm.aside.order\") }}</p>\n    <template v-for=\"(item, key) of orderItems\">\n      <div v-if=\"item\" :key=\"key\" class=\"aside__item\">\n        <span>{{ $translate(`orderForm.aside.${key}`) }}</span>\n        <span></span>\n        <span v-if=\"key === 'rent'\">\n          <template v-if=\"getDaysCount(item.from, item.to)\">\n            {{ getDaysCount(item.from, item.to) }} д\n          </template>\n          <template v-if=\"getHoursCount(item.from, item.to)\">\n            {{ getHoursCount(item.from, item.to) }} ч\n          </template>\n        </span>\n        <span v-else>{{ item }}</span>\n      </div>\n    </template>\n    <div v-if=\"price && !loading\" class=\"aside__amount\">\n      <span>{{ $translate(\"orderForm.aside.price\") }}</span>\n      <span>{{ price }} ₽</span>\n    </div>\n    <i\n      v-else-if=\"loading\"\n      class=\"el-icon-loading\"\n      style=\"margin: 10px auto\"\n    ></i>\n    <el-button\n      type=\"success\"\n      :class=\"[isFinishOrder ? 'aside__amount-finish-btn' : '']\"\n      :disabled=\"isDisabled\"\n      @click=\"getNextStep\"\n    >\n      {{ $translate(`orderForm.aside.${getLocaleKey($route.name)}`) }}\n    </el-button>\n  </aside>\n</template>\n\n<script>\n  import { computed } from \"@vue/composition-api\";\n\n  export default {\n    name: \"OrderAside\",\n    props: {\n      orderItems: {\n        type: Object,\n        default: () => ({}),\n      },\n      isDisabled: {\n        type: Boolean,\n        default: true,\n      },\n      price: {\n        type: String | Number,\n        default: null,\n      },\n      loading: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    setup(props, { emit, root }) {\n      const isFinishOrder = computed(() =>\n        root.$route.path.includes(\"confirm-order\"),\n      );\n      const keys = {\n        location: \"chooseModel\",\n        model: \"extra\",\n        extra: \"amountOptions\",\n        amount: \"buy\",\n        confirm: \"cancel\",\n      };\n      const getLocaleKey = key => keys[key.toLowerCase()];\n\n      function getNextStep() {\n        !isFinishOrder.value ? emit(\"next\") : emit(\"cancel\");\n      }\n\n      return {\n        getNextStep,\n        isFinishOrder,\n        getLocaleKey,\n      };\n    },\n    methods: {\n      getDaysCount(from, to) {\n        const difference = new Date(to) - new Date(from);\n        return difference ? Math.floor(+difference / 1000 / 60 / 60 / 24) : 0;\n      },\n      getHoursCount(from, to) {\n        return new Date(to).getHours() - new Date(from).getHours();\n      },\n    },\n  };\n</script>\n\n<style scoped lang=\"scss\">\n  .el-button--success {\n    border-radius: 8px !important;\n  }\n  .order-form {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n\n    &__aside {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-end;\n      padding: 32px 0 0 32px;\n      width: 30%;\n      max-width: 30%;\n      border-left: 1px solid $gray-light;\n\n      @include sm {\n        padding: 32px 0 32px 0;\n        width: 100%;\n        max-width: 100%;\n        border-left: none;\n        align-items: flex-start;\n      }\n    }\n  }\n\n  .aside {\n    &__order {\n      display: inline-block;\n      margin: 0 0 26px 0;\n      font-weight: 500;\n      font-size: 18px;\n      color: $black;\n    }\n\n    &__item {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      margin-bottom: 20px;\n      width: 100%;\n\n      @include sm {\n        flex-wrap: wrap;\n        flex-direction: column;\n      }\n\n      & span {\n        &:first-child {\n          display: flex;\n          align-items: flex-end;\n          margin-right: 6px;\n          font-size: 14px;\n          color: $black;\n          text-align: left;\n        }\n        &:last-child {\n          font-size: 14px;\n          color: $gray;\n          text-align: right;\n          max-width: 120px;\n\n          @include sm {\n            text-align: left;\n          }\n        }\n        &:nth-child(2) {\n          display: inline-block;\n          border-bottom: 2px dotted $gray-light;\n          width: 74px;\n\n          @include sm {\n            display: none;\n          }\n        }\n      }\n    }\n\n    &__amount {\n      width: 100%;\n      text-align: left;\n      margin-bottom: 32px;\n\n      & span:first-child {\n        margin-right: 4px;\n      }\n\n      &-finish-btn {\n        background: linear-gradient(90deg, $brown 0%, $pink 100%);\n        border-radius: 8px !important;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderAside.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderAside.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderAside.vue?vue&type=template&id=71fbfa41&scoped=true&\"\nimport script from \"./OrderAside.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderAside.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderAside.vue?vue&type=style&index=0&id=71fbfa41&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71fbfa41\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=style&index=0&id=46edc520&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"amount-options__wrapper\"},[(_vm.title)?_c('p',{staticClass:\"amount-options__title\"},[_vm._v(\" \"+_vm._s(_vm.$translate(\"orderForm.content.orderConfirm\"))+\" \")]):_vm._e(),(!_vm.loading)?[_c('div',{staticClass:\"amount-options__info\"},[_c('p',{staticClass:\"amount-options__info-model\"},[_vm._v(_vm._s(_vm.items.model))]),(_vm.items.number)?_c('p',{staticClass:\"amount-options__info-number\"},[_vm._v(\" \"+_vm._s(_vm.items.number)+\" \")]):_vm._e(),_c('p',{staticClass:\"amount-options__info-tank\"},[_vm._v(\" \"+_vm._s(_vm.$translate(\"orderForm.content.amount.fuel\"))+\" \"),_c('span',[_vm._v(_vm._s(_vm.items.tank))])]),_c('p',{staticClass:\"amount-options__info-available\"},[_vm._v(\" \"+_vm._s(_vm.$translate(\"orderForm.content.amount.available\"))+\" \"),_c('span',[_vm._v(_vm._s(_vm.items.available))])])]),_c('div',{staticClass:\"amount__info\"},[_c('img',{attrs:{\"src\":_vm.items.image.path,\"alt\":_vm.items.image.name},on:{\"error\":function (e) { return (e.target.src = 'images/car-stub.png'); }}})])]:_c('i',{staticClass:\"el-icon-loading\",staticStyle:{\"transform\":\"translateX(-50%)\",\"position\":\"absolute\",\"left\":\"50%\"}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"amount-options__wrapper\">\n    <p v-if=\"title\" class=\"amount-options__title\">\n      {{ $translate(\"orderForm.content.orderConfirm\") }}\n    </p>\n    <template v-if=\"!loading\">\n      <div class=\"amount-options__info\">\n        <p class=\"amount-options__info-model\">{{ items.model }}</p>\n        <p v-if=\"items.number\" class=\"amount-options__info-number\">\n          {{ items.number }}\n        </p>\n        <p class=\"amount-options__info-tank\">\n          {{ $translate(\"orderForm.content.amount.fuel\") }}\n          <span>{{ items.tank }}</span>\n        </p>\n        <p class=\"amount-options__info-available\">\n          {{ $translate(\"orderForm.content.amount.available\") }}\n          <span>{{ items.available }}</span>\n        </p>\n      </div>\n      <div class=\"amount__info\">\n        <img\n          :src=\"items.image.path\"\n          :alt=\"items.image.name\"\n          @error=\"e => (e.target.src = 'images/car-stub.png')\"\n        />\n      </div>\n    </template>\n    <i\n      v-else\n      class=\"el-icon-loading\"\n      style=\"transform: translateX(-50%);position: absolute;left: 50%\"\n    ></i>\n  </div>\n</template>\n\n<script>\n  import { computed } from \"@vue/composition-api\";\n\n  export default {\n    name: \"AmountListOptions\",\n    props: {\n      orderOptions: {\n        type: Object,\n        default: () => ({}),\n      },\n      title: {\n        type: Boolean,\n        required: false,\n      },\n      loading: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    setup(props) {\n      const items = computed(() => props.orderOptions);\n\n      return { items };\n    },\n  };\n</script>\n\n<style scoped lang=\"scss\">\n  .amount-options {\n    display: flex;\n    justify-content: space-between;\n    height: 100%;\n\n    @include sm {\n      flex-wrap: wrap;\n    }\n\n    &__wrapper {\n      position: relative;\n      justify-content: space-between;\n      flex-wrap: wrap;\n      max-width: 60%;\n      width: 60%;\n      display: flex;\n      padding-top: 64px;\n\n      @include md-and-down {\n        padding-top: 46px;\n        width: 100%;\n        max-width: 100%;\n        flex-wrap: wrap;\n      }\n    }\n\n    &__info {\n      &-model {\n        font-size: 18px;\n        color: $black;\n      }\n\n      &-available,\n      &-tank {\n        font-weight: bold;\n        font-size: 14px;\n        color: $black;\n\n        & span {\n          display: inline-block;\n          font-weight: 300;\n\n          @include md-and-down {\n            display: block;\n            line-height: 20px;\n          }\n        }\n      }\n      & p {\n        text-align: left;\n        margin: 0 0 8px 0;\n      }\n\n      & img {\n        max-width: 100%;\n\n        @include md-and-down {\n          max-width: 90%;\n        }\n      }\n    }\n\n    &__info-number {\n      font-size: 14px;\n      color: $black;\n      border: 1px solid $gray;\n      border-radius: 3px;\n      padding: 4px;\n      display: flex;\n      max-width: 94px;\n      justify-content: center;\n    }\n\n    &__title {\n      height: min-content;\n      position: absolute;\n      top: 0;\n      width: 100%;\n      text-align: left;\n      font-size: 24px;\n      color: $black;\n      margin: 24px 0 0 0;\n\n      @include md-and-down {\n        font-size: 20px;\n        top: -14px;\n      }\n    }\n  }\n\n  .amount__info {\n    & img {\n      max-width: 256px;\n      max-height: 120px;\n\n      @include sm {\n        max-width: 100%;\n        max-height: 330px;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AmountListOptions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AmountListOptions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AmountListOptions.vue?vue&type=template&id=4a3f44e1&scoped=true&\"\nimport script from \"./AmountListOptions.vue?vue&type=script&lang=js&\"\nexport * from \"./AmountListOptions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AmountListOptions.vue?vue&type=style&index=0&id=4a3f44e1&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a3f44e1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"confirm-order\"},[_c('amount-list-options',{attrs:{\"title\":\"\",\"order-options\":_vm.orderOptions,\"loading\":_vm.isLoading}}),_c('order-aside',{attrs:{\"order-items\":_vm.orderItems,\"is-disabled\":false,\"loading\":_vm.isLoading,\"price\":_vm.finalPrice},on:{\"cancel\":_vm.cancelUserOrder}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {\n  ref,\n  reactive,\n  onMounted,\n  onBeforeUnmount,\n} from \"@vue/composition-api\";\nimport { Notification } from \"element-ui\";\nimport { cancelOrderById } from \"@/api\";\nimport { useRouter } from \"@/router\";\nimport { useOrder } from \"@/components/order/composables/useOrder\";\n\nexport default function useConfirmOrder(orderId) {\n  const { configItems, getOrderFromPreviousStep, resetOrderItems } = useOrder();\n  let orderItems = reactive({\n    city: \"\",\n    model: \"\",\n    color: \"\",\n    rent: {},\n    tariff: \"\",\n    tank: \"\",\n  });\n  let orderOptions = ref({\n    model: \"\",\n    number: \"\",\n    tank: \"\",\n    available: \"\",\n  });\n  let isLoading = ref(true);\n  let finalPrice = ref(0);\n  const { router } = useRouter();\n\n  async function cancelOrder(orderId, userData) {\n    try {\n      await cancelOrderById(orderId, userData);\n      await Notification.success(\"Order cancelled\");\n      await router.push({ name: \"Home\" });\n    } catch (e) {\n      Notification.error({ message: e });\n    }\n  }\n\n  async function getPreviousOrder() {\n    try {\n      await getOrderFromPreviousStep(orderId);\n\n      orderItems.city = `${configItems.value.cityId.name}, ${configItems.value.pointId.address}`;\n      orderItems.model = configItems.value.carId.name;\n      orderItems.color = configItems.value.color;\n      orderItems.rent = configItems.value.dateTo - configItems.value.dateFrom;\n      orderItems.tank = configItems.value.isFullTank ? \"Да\" : \"\";\n      orderItems.child = configItems.value.isNeedChildChair ? \"Да\" : \"\";\n      orderItems.rightDrive = configItems.value.isRightWheel ? \"Да\" : \"\";\n      orderItems.rent = {\n        to: configItems.value.dateTo,\n        from: configItems.value.dateFrom,\n      };\n      orderOptions.value.number = configItems.value.carId.number;\n      orderOptions.value.tank = configItems.value.isFullTank ? \"100%\" : \"\";\n      orderOptions.value.model = configItems.value.carId.name;\n      orderOptions.value.available = `${new Date(\n        configItems.value.dateFrom,\n      ).toLocaleDateString()} ${new Date(\n        configItems.value.dateFrom,\n      ).getHours()}:${new Date(configItems.value.dateFrom).getMinutes()}`;\n      orderOptions.value.image = {\n        ...configItems.value.carId.thumbnail,\n        name: configItems.value.carId.name,\n      };\n      finalPrice.value = configItems.value.price;\n    } catch (e) {\n      Notification.error({ message: e });\n    }\n  }\n\n  function cancelUserOrder() {\n    cancelOrder(orderId, configItems.value);\n  }\n\n  onMounted(() =>\n    getPreviousOrder()\n      .then(() => (isLoading.value = false))\n      .catch(e => Notification.error({ message: e }))\n      .finally(() => (isLoading.value = false)),\n  );\n  onBeforeUnmount(() => {\n    orderItems = {};\n    orderOptions = {};\n    isLoading = true;\n    finalPrice = 0;\n    resetOrderItems();\n  });\n\n  return {\n    orderItems,\n    orderOptions,\n    isLoading,\n    finalPrice,\n    cancelUserOrder,\n  };\n}\n","<template>\n  <div class=\"confirm-order\">\n    <amount-list-options\n      title\n      :order-options=\"orderOptions\"\n      :loading=\"isLoading\"\n    />\n    <order-aside\n      :order-items=\"orderItems\"\n      :is-disabled=\"false\"\n      :loading=\"isLoading\"\n      :price=\"finalPrice\"\n      @cancel=\"cancelUserOrder\"\n    />\n  </div>\n</template>\n\n<script>\n  import OrderAside from \"@/components/order/OrderAside\";\n  import AmountListOptions from \"@/components/order/common/AmountListOptions\";\n  import useConfirmOrder from \"@/components/order/composables/useConfirmOrder\";\n\n  export default {\n    name: \"ConfirmOrder\",\n    components: {\n      OrderAside,\n      AmountListOptions,\n    },\n    setup(props, { root }) {\n      const orderId = root.$route.query.id;\n      const {\n        orderItems,\n        orderOptions,\n        isLoading,\n        finalPrice,\n        cancelUserOrder,\n      } = useConfirmOrder(orderId);\n\n      return {\n        orderItems,\n        orderOptions,\n        orderId,\n        isLoading,\n        finalPrice,\n        cancelUserOrder,\n      };\n    },\n  };\n</script>\n\n<style scoped lang=\"scss\">\n  .confirm-order {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: nowrap;\n\n    @include sm {\n      flex-wrap: wrap;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfirmOrder.vue?vue&type=template&id=46edc520&scoped=true&\"\nimport script from \"./ConfirmOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfirmOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ConfirmOrder.vue?vue&type=style&index=0&id=46edc520&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46edc520\",\n  null\n  \n)\n\nexport default component.exports","import { ref } from \"@vue/composition-api\";\nimport { createOrder, getOrderById, updateOrder } from \"@/api\";\nimport { useRouter } from \"@/router\";\nimport { Notification } from \"element-ui\";\n\nlet configItems = ref({\n  orderStatusId: \"607069ad2aed9a0b9b7e5530\",\n  cityId: \"\",\n  pointId: \"\",\n  carId: {},\n  color: \"\",\n  dateFrom: 0,\n  dateTo: 0,\n  rateId: {},\n  price: 0,\n  isFullTank: false,\n  isNeedChildChair: false,\n  isRightWheel: false,\n});\nconst { router } = useRouter();\nconst resetOrderItems = () => {\n  configItems = {\n    orderStatusId: \"607069ad2aed9a0b9b7e5530\",\n    cityId: \"\",\n    pointId: \"\",\n    carId: {},\n    color: \"\",\n    dateFrom: 0,\n    dateTo: 0,\n    rateId: {},\n    price: 0,\n    isFullTank: false,\n    isNeedChildChair: false,\n    isRightWheel: false,\n  };\n};\n\nexport function updateConfigFields(fields) {\n  for (const fieldsKey in fields) {\n    if (fields.hasOwnProperty(fieldsKey)) {\n      configItems.value[fieldsKey] = fields[fieldsKey];\n    }\n  }\n}\n\nasync function creationNewOrder(userData) {\n  const order = {\n    ...userData,\n  };\n\n  try {\n    const { data } = await createOrder(order);\n    await router.push({\n      name: \"Model\",\n      query: { id: data.data.id },\n    });\n  } catch (e) {\n    Notification.error({ message: e });\n  }\n}\n\nasync function getOrderFromPreviousStep(orderId) {\n  try {\n    const { data } = await getOrderById(orderId);\n    updateConfigFields(data.data);\n  } catch (e) {\n    Notification.error({ message: e });\n  }\n}\n\nfunction updatingCurrentOrder(userData, id, routeName) {\n  const order = {\n    ...configItems.value,\n    ...userData,\n  };\n\n  try {\n    updateOrder(id, order);\n    router.push({ name: routeName, query: { id } });\n  } catch (e) {\n    Notification.error({ message: e });\n  }\n}\n\nexport function useOrder() {\n  return {\n    configItems,\n    updateConfigFields,\n    creationNewOrder,\n    getOrderFromPreviousStep,\n    updatingCurrentOrder,\n    resetOrderItems,\n  };\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AmountListOptions.vue?vue&type=style&index=0&id=4a3f44e1&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderAside.vue?vue&type=style&index=0&id=71fbfa41&scoped=true&lang=scss&\""],"sourceRoot":""}