(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Confirm"],{1782:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside",{staticClass:"order-form__aside"},[r("p",{staticClass:"aside__order"},[e._v(e._s(e.$translate("orderForm.aside.order")))]),e._l(e.orderItems,(function(t,n){return[t?r("div",{key:n,staticClass:"aside__item"},[r("span",[e._v(e._s(e.$translate("orderForm.aside."+n)))]),r("span"),"rent"===n?r("span",[e.getDaysCount(t.from,t.to)?[e._v(" "+e._s(e.getDaysCount(t.from,t.to))+" д ")]:e._e(),e.getHoursCount(t.from,t.to)?[e._v(" "+e._s(e.getHoursCount(t.from,t.to))+" ч ")]:e._e()],2):r("span",[e._v(e._s(t))])]):e._e()]})),e.price&&!e.loading?r("div",{staticClass:"aside__amount"},[r("span",[e._v(e._s(e.$translate("orderForm.aside.price")))]),r("span",[e._v(e._s(e.price)+" ₽")])]):e.loading?r("i",{staticClass:"el-icon-loading",staticStyle:{margin:"10px auto"}}):e._e(),r("el-button",{class:[e.isFinishOrder?"aside__amount-finish-btn":""],attrs:{type:"success",disabled:e.isDisabled},on:{click:e.getNextStep}},[e._v(" "+e._s(e.$translate("orderForm.aside."+e.getLocaleKey(e.$route.name)))+" ")])],2)},a=[],o=r("a6f4"),i={name:"OrderAside",props:{orderItems:{type:Object,default:function(){return{}}},isDisabled:{type:Boolean,default:!0},price:{type:String|Number,default:null},loading:{type:Boolean,default:!1}},setup:function(e,t){var r=t.emit,n=t.root,a=Object(o["a"])((function(){return n.$route.path.includes("confirm-order")})),i={location:"chooseModel",model:"extra",extra:"amountOptions",amount:"buy",confirm:"cancel"},s=function(e){return i[e.toLowerCase()]};function c(){a.value?r("cancel"):r("next")}return{getNextStep:c,isFinishOrder:a,getLocaleKey:s}},methods:{getDaysCount:function(e,t){var r=new Date(t)-new Date(e);return r?Math.floor(+r/1e3/60/60/24):0},getHoursCount:function(e,t){return new Date(t).getHours()-new Date(e).getHours()}}},s=i,c=(r("cde1"),r("2877")),u=Object(c["a"])(s,n,a,!1,null,"71fbfa41",null);t["a"]=u.exports},3401:function(e,t,r){"use strict";r("7862")},"6c71":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"amount-options__wrapper"},[e.title?r("p",{staticClass:"amount-options__title"},[e._v(" "+e._s(e.$translate("orderForm.content.orderConfirm"))+" ")]):e._e(),e.loading?r("i",{staticClass:"el-icon-loading",staticStyle:{transform:"translateX(-50%)",position:"absolute",left:"50%"}}):[r("div",{staticClass:"amount-options__info"},[r("p",{staticClass:"amount-options__info-model"},[e._v(e._s(e.items.model))]),e.items.number?r("p",{staticClass:"amount-options__info-number"},[e._v(" "+e._s(e.items.number)+" ")]):e._e(),r("p",{staticClass:"amount-options__info-tank"},[e._v(" "+e._s(e.$translate("orderForm.content.amount.fuel"))+" "),r("span",[e._v(e._s(e.items.tank))])]),r("p",{staticClass:"amount-options__info-available"},[e._v(" "+e._s(e.$translate("orderForm.content.amount.available"))+" "),r("span",[e._v(e._s(e.items.available))])])]),r("div",{staticClass:"amount__info"},[r("img",{attrs:{src:e.items.image.path,alt:e.items.image.name},on:{error:function(e){return e.target.src="images/car-stub.png"}}})])]],2)},a=[],o=r("a6f4"),i={name:"AmountListOptions",props:{orderOptions:{type:Object,default:function(){return{}}},title:{type:Boolean,required:!1},loading:{type:Boolean,default:!1}},setup:function(e){var t=Object(o["a"])((function(){return e.orderOptions}));return{items:t}}},s=i,c=(r("c4eb"),r("2877")),u=Object(c["a"])(s,n,a,!1,null,"4a3f44e1",null);t["a"]=u.exports},"72af":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"confirm-order"},[r("amount-list-options",{attrs:{title:"","order-options":e.orderOptions,loading:e.isLoading}}),r("order-aside",{attrs:{"order-items":e.orderItems,"is-disabled":!1,loading:e.isLoading,price:e.finalPrice},on:{cancel:e.cancelUserOrder}})],1)},a=[],o=r("1782"),i=r("6c71"),s=r("a6f4"),c=r("5c96"),u=r("365c"),l=r("a18c"),d=r("77e3");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){v(o,n,a,i,s,"next",e)}function s(e){v(o,n,a,i,s,"throw",e)}i(void 0)}))}}function O(e){var t=Object(d["a"])(),r=t.configItems,n=t.getOrderFromPreviousStep,a=t.resetOrderItems,o=Object(s["f"])({city:"",model:"",color:"",rent:{},tariff:"",tank:""}),i=Object(s["g"])({model:"",number:"",tank:"",available:""}),f=Object(s["g"])(!0),m=Object(s["g"])(0),v=Object(l["b"])(),O=v.router;function g(e,t){return h.apply(this,arguments)}function h(){return h=b(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["a"])(t,r);case 3:return e.next=5,c["Notification"].success("Order cancelled");case 5:return e.next=7,O.push({name:"Home"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),c["Notification"].error({message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),h.apply(this,arguments)}function _(){return y.apply(this,arguments)}function y(){return y=b(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(e);case 3:o.city="".concat(r.value.cityId.name,", ").concat(r.value.pointId.address),o.model=r.value.carId.name,o.color=r.value.color,o.rent=r.value.dateTo-r.value.dateFrom,o.tank=r.value.isFullTank?"Да":"",o.child=r.value.isNeedChildChair?"Да":"",o.rightDrive=r.value.isRightWheel?"Да":"",o.rent={to:r.value.dateTo,from:r.value.dateFrom},i.value.number=r.value.carId.number,i.value.tank=r.value.isFullTank?"100%":"",i.value.model=r.value.carId.name,i.value.available="".concat(new Date(r.value.dateFrom).toLocaleDateString()," ").concat(new Date(r.value.dateFrom).getHours(),":").concat(new Date(r.value.dateFrom).getMinutes()),i.value.image=p(p({},r.value.carId.thumbnail),{},{name:r.value.carId.name}),m.value=r.value.price,t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),c["Notification"].error({message:t.t0});case 22:case"end":return t.stop()}}),t,null,[[0,19]])}))),y.apply(this,arguments)}function w(){g(e,r.value)}return Object(s["e"])((function(){return _().then((function(){return f.value=!1})).catch((function(e){return c["Notification"].error({message:e})})).finally((function(){return f.value=!1}))})),Object(s["d"])((function(){o={},i={},f=!0,m=0,a()})),{orderItems:o,orderOptions:i,isLoading:f,finalPrice:m,cancelUserOrder:w}}var g={name:"ConfirmOrder",components:{OrderAside:o["a"],AmountListOptions:i["a"]},setup:function(e,t){var r=t.root,n=r.$route.query.id,a=O(n),o=a.orderItems,i=a.orderOptions,s=a.isLoading,c=a.finalPrice,u=a.cancelUserOrder;return{orderItems:o,orderOptions:i,orderId:n,isLoading:s,finalPrice:c,cancelUserOrder:u}}},h=g,_=(r("3401"),r("2877")),y=Object(_["a"])(h,n,a,!1,null,"46edc520",null);t["default"]=y.exports},"77e3":function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var n=r("a6f4"),a=r("365c"),o=r("a18c"),i=r("5c96");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}var f=Object(n["g"])({orderStatusId:"607069ad2aed9a0b9b7e5530",cityId:"",pointId:"",carId:{},color:"",dateFrom:0,dateTo:0,rateId:{},price:0,isFullTank:!1,isNeedChildChair:!1,isRightWheel:!1}),p=Object(o["b"])(),m=p.router,v=function(){f={orderStatusId:"607069ad2aed9a0b9b7e5530",cityId:"",pointId:"",carId:{},color:"",dateFrom:0,dateTo:0,rateId:{},price:0,isFullTank:!1,isNeedChildChair:!1,isRightWheel:!1}};function b(e){for(var t in e)e.hasOwnProperty(t)&&(f.value[t]=e[t])}function O(e){return g.apply(this,arguments)}function g(){return g=d(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c({},t),e.prev=1,e.next=4,Object(a["b"])(r);case 4:return n=e.sent,o=n.data,e.next=8,m.push({name:"Model",query:{id:o.data.id}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),i["Notification"].error({message:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),g.apply(this,arguments)}function h(e){return _.apply(this,arguments)}function _(){return _=d(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(a["f"])(t);case 3:r=e.sent,n=r.data,b(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),i["Notification"].error({message:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),_.apply(this,arguments)}function y(e,t,r){var n=c(c({},f.value),e);try{Object(a["i"])(t,n),m.push({name:r,query:{id:t}})}catch(o){i["Notification"].error({message:o})}}function w(){return{configItems:f,updateConfigFields:b,creationNewOrder:O,getOrderFromPreviousStep:h,updatingCurrentOrder:y,resetOrderItems:v}}},7862:function(e,t,r){},"843e":function(e,t,r){},b1f5:function(e,t,r){},c4eb:function(e,t,r){"use strict";r("843e")},cde1:function(e,t,r){"use strict";r("b1f5")}}]);
//# sourceMappingURL=Confirm.52484df4.js.map