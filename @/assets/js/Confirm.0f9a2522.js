(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Confirm"],{1782:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside",{staticClass:"order-form__aside"},[r("p",{staticClass:"aside__order"},[e._v(e._s(e.$translate("orderForm.aside.order")))]),e._l(e.orderItems,(function(t,n){return[t?r("div",{key:n,staticClass:"aside__item"},[r("span",[e._v(e._s(e.$translate("orderForm.aside."+n)))]),r("span"),"rent"===n?r("span",[e.getDaysCount(t.from,t.to)?[e._v(" "+e._s(e.getDaysCount(t.from,t.to))+" д ")]:e._e(),e.getHoursCount(t.from,t.to)?[e._v(" "+e._s(e.getHoursCount(t.from,t.to))+" ч ")]:e._e()],2):r("span",[e._v(e._s(t))])]):e._e()]})),e.price&&!e.loading?r("div",{staticClass:"aside__amount"},[r("span",[e._v(e._s(e.$translate("orderForm.aside.price")))]),r("span",[e._v(e._s(e.price)+" ₽")])]):e.loading?r("i",{staticClass:"el-icon-loading",staticStyle:{margin:"10px auto"}}):e._e(),r("el-button",{class:[e.isFinishOrder?"aside__amount-finish-btn":""],attrs:{type:"success",disabled:e.isDisabled},on:{click:e.getNextStep}},[e._v(" "+e._s(e.$translate("orderForm.aside."+e.getLocaleKey(e.$route.name)))+" ")])],2)},a=[],o=r("a6f4"),i={name:"OrderAside",props:{orderItems:{type:Object,default:function(){return{}}},isDisabled:{type:Boolean,default:!0},price:{type:String|Number,default:null},loading:{type:Boolean,default:!1}},setup:function(e,t){var r=t.emit,n=t.root,a=Object(o["a"])((function(){return n.$route.path.includes("confirm-order")})),i={location:"chooseModel",model:"extra",extra:"amountOptions",amount:"buy",confirm:"cancel"},s=function(e){return i[e.toLowerCase()]};function c(){a.value?r("cancel"):r("next")}return{getNextStep:c,isFinishOrder:a,getLocaleKey:s}},methods:{getDaysCount:function(e,t){var r=new Date(t)-new Date(e);return r?Math.floor(+r/1e3/60/60/24):0},getHoursCount:function(e,t){return new Date(t).getHours()-new Date(e).getHours()}}},s=i,c=(r("cde1"),r("2877")),u=Object(c["a"])(s,n,a,!1,null,"71fbfa41",null);t["a"]=u.exports},"26be":function(e,t,r){},"6c71":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"amount-options__wrapper"},[e.title?r("p",{staticClass:"amount-options__title"},[e._v(" "+e._s(e.$translate("orderForm.content.orderConfirm"))+" ")]):e._e(),e.loading?r("i",{staticClass:"el-icon-loading",staticStyle:{transform:"translateX(-50%)",position:"absolute",left:"50%"}}):[r("div",{staticClass:"amount-options__info"},[r("p",[e._v(e._s(e.items.model))]),r("p",[e._v(e._s(e.items.number))]),r("p",[e._v(" "+e._s(e.$translate("orderForm.content.amount.fuel"))+" "),r("span",[e._v(e._s(e.items.tank))])]),r("p",[e._v(" "+e._s(e.$translate("orderForm.content.amount.available"))+" "),r("span",[e._v(e._s(e.items.available))])])]),r("div",{staticClass:"amount__info"},[r("img",{attrs:{src:e.items.image.path,alt:e.items.image.name},on:{error:function(e){return e.target.src="images/car-stub.png"}}})])]],2)},a=[],o=r("a6f4"),i={name:"AmountListOptions",props:{orderOptions:{type:Object,default:function(){return{}}},title:{type:Boolean,required:!1},loading:{type:Boolean,default:!1}},setup:function(e){var t=Object(o["a"])((function(){return e.orderOptions}));return{items:t}}},s=i,c=(r("ff6d"),r("2877")),u=Object(c["a"])(s,n,a,!1,null,"8cf89302",null);t["a"]=u.exports},"72af":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"confirm-order"},[r("amount-list-options",{attrs:{title:"","order-options":e.orderOptions,loading:e.isLoading}}),r("order-aside",{attrs:{"order-items":e.orderItems,"is-disabled":!1,loading:e.isLoading,price:e.finalPrice},on:{cancel:e.cancelOrder}})],1)},a=[],o=r("1782"),i=r("6c71"),s=r("a6f4"),c=r("365c"),u=r("5c96"),l=r("77e3");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,a)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){p(o,n,a,i,s,"next",e)}function s(e){p(o,n,a,i,s,"throw",e)}i(void 0)}))}}var b=Object(l["a"])(),_=b.configItems,g=b.updateConfigFields,O={name:"ConfirmOrder",components:{OrderAside:o["a"],AmountListOptions:i["a"]},setup:function(e,t){var r=t.root,n=Object(s["e"])({city:"",model:"",color:"",rent:{},tariff:"",tank:""}),a=Object(s["f"])({model:"",number:"",tank:"",available:""}),o=r.$route.query.id,i=Object(s["f"])(!0),l=Object(s["f"])(0);function d(){return m.apply(this,arguments)}function m(){return m=v(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["f"])(o);case 3:t=e.sent,r=t.data,g(r.data),n.city="".concat(_.value.cityId.name,", ").concat(_.value.pointId.address),n.model=_.value.carId.name,n.color=_.value.color,n.rent=_.value.dateTo-_.value.dateFrom,n.tank=_.value.isFullTank?"Да":"",n.child=_.value.isNeedChildChair?"Да":"",n.rightDrive=_.value.isRightWheel?"Да":"",n.rent={to:_.value.dateTo,from:_.value.dateFrom},a.value.number=_.value.carId.number,a.value.tank=_.value.isFullTank?"100%":"",a.value.model=_.value.carId.name,a.value.available="".concat(new Date(_.value.dateFrom).toLocaleDateString()," ").concat(new Date(_.value.dateFrom).getHours(),":").concat(new Date(_.value.dateFrom).getMinutes()),a.value.image=f(f({},_.value.carId.thumbnail),{},{name:_.value.carId.name}),l.value=_.value.price,e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](0),u["Notification"].error({message:e.t0});case 25:case"end":return e.stop()}}),e,null,[[0,22]])}))),m.apply(this,arguments)}return Object(s["d"])((function(){return d().then((function(){return i.value=!1}))})),{orderItems:n,orderOptions:a,orderId:o,isLoading:i,finalPrice:l}},methods:{cancelOrder:function(){var e=this;return v(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["a"])(e.orderId,_);case 3:return t.next=5,u["Notification"].success("Order cancelled");case 5:return t.next=7,e.$router.push({name:"Home"});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),u["Notification"].error({message:t.t0});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},h=O,y=(r("cb9d"),r("2877")),w=Object(y["a"])(h,n,a,!1,null,"d28ee358",null);t["default"]=w.exports},"77e3":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("a6f4"),a=Object(n["f"])({orderStatusId:"607069ad2aed9a0b9b7e5530",cityId:"",pointId:"",carId:{},color:"",dateFrom:0,dateTo:0,rateId:{},price:0,isFullTank:!1,isNeedChildChair:!1,isRightWheel:!1});function o(e){for(var t in e)e.hasOwnProperty(t)&&(a.value[t]=e[t])}function i(){return{configItems:a,updateConfigFields:o}}},b1f5:function(e,t,r){},cb9d:function(e,t,r){"use strict";r("f663")},cde1:function(e,t,r){"use strict";r("b1f5")},f663:function(e,t,r){},ff6d:function(e,t,r){"use strict";r("26be")}}]);
//# sourceMappingURL=Confirm.0f9a2522.js.map